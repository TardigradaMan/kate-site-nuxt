// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤ routes
// const Skill = require('../models/content.model')

// module.exports.create = async (req, res) => {
//   const skills = new Skill({
//     skill: req.body.skill
//   })

//   try {
//     await skills.save()
//     res.status(201).json(skills)
//   } catch (error) {
//     res.status(500).json(error)
//   }
// }

module.exports.sendMsg = async (req, res) => {
  const keys = require('../keys')
  const axios = require('axios')

  //     if (formData.page === 'home') {
  //       text = `<b><i><u>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º—ã:</u></i></b>%0A<strong>–ò–º—è: </strong><i>${formData.name}</i>%0A<strong>–¢–µ–ª–µ—Ñ–æ–Ω: </strong><i>${formData.phone}</i>%0Aüëâ<a href="tg://user?id=1009703975">–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞</a>`
  //     }
  //     if (formData.page === 'small') {
  //       text = `<b><i><u>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å –º–∞–ª–æ–π —Ñ–æ—Ä–º—ã:</u></i></b>%0A<strong>–ò–º—è: </strong><i>${formData.name}</i>%0A<strong>–¢–µ–ª–µ—Ñ–æ–Ω: </strong><i>${formData.phone}</i>%0A<strong>–°–æ–æ–±—â–µ–Ω–∏–µ: </strong><i>${formData.text}</i>%0Aüëâ<a href="tg://user?id=1009703975">–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞</a>`
  //     }

  const fields = [
    '<b><i><u>–ù–æ–≤–∞—è –∑–∞—è–≤–∫–∞ —Å –≥–ª–∞–≤–Ω–æ–π —Ñ–æ—Ä–º—ã:</u></i></b>',
    `<strong>–ò–º—è: </strong><i>${req.body.name}</i>`,
    `<strong>–¢–µ–ª–µ—Ñ–æ–Ω: </strong><i>${req.body.phone}</i>`,
    `<strong>–°–æ–æ–±—â–µ–Ω–∏–µ: </strong><i>${req.body.text}</i>`,
    `üëâ<a href="tg://user?id=1009703975">–û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞</a>`
  ]
  let msg = ''
  fields.forEach(field => {
    msg += field + '\n'
  })

  const uri = `https://api.telegram.org/bot${keys.TOKEN}/sendMessage?chat_id=${keys.CHAT_ID}&parse_mode=html&text=${msg}`
  const URL = encodeURI(uri)

  try {
    await axios.post(URL)
    res.json({ message: '–°–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ' })
  } catch (error) {
    console.log(error)
  }
}
